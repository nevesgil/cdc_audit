# CDC Audit System Environment Configuration
# Copy this file to .env and modify values as needed

# ==========================================
# APPLICATION SETTINGS
# ==========================================

# Application environment (development, staging, production)
ENVIRONMENT=development

# Enable debug mode
DEBUG=false

# Application name
APP_NAME=cdc-audit-consumer

# Application version (auto-detected in CI/CD)
APP_VERSION=1.0.0

# ==========================================
# DATABASE SETTINGS
# ==========================================

# PostgreSQL admin credentials
POSTGRES_USER=admin
POSTGRES_PASSWORD=admin
POSTGRES_DB=database

# Sink database (where audit logs are stored)
SINK_DB_HOST=localhost
SINK_DB_PORT=5432
SINK_DB_USERNAME=admin
SINK_DB_PASSWORD=admin
SINK_DB_NAME=sink_db
SINK_DB_SCHEMA=public

# Database connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# SSL settings (optional)
# DB_SSL_MODE=require
# DB_SSL_CERT=/path/to/client.crt
# DB_SSL_KEY=/path/to/client.key
# DB_SSL_ROOT_CERT=/path/to/ca.crt

# Source database (being monitored for changes)
SOURCE_DB_HOST=localhost
SOURCE_DB_PORT=5432
SOURCE_DB_USERNAME=admin
SOURCE_DB_PASSWORD=admin
SOURCE_DB_NAME=source_db

# ==========================================
# KAFKA SETTINGS
# ==========================================

# Kafka bootstrap servers (comma-separated)
KAFKA_BOOTSTRAP_SERVERS=localhost:29092

# Consumer group ID
KAFKA_GROUP_ID=cdc_audit_consumer

# Auto offset reset strategy
KAFKA_AUTO_OFFSET_RESET=earliest

# Consumer performance settings
KAFKA_SESSION_TIMEOUT_MS=30000
KAFKA_HEARTBEAT_INTERVAL_MS=3000
KAFKA_MAX_POLL_RECORDS=500
KAFKA_FETCH_MIN_BYTES=1024
KAFKA_FETCH_MAX_WAIT_MS=500

# Consumer-specific settings
KAFKA_CONSUMER_TIMEOUT_MS=5000
KAFKA_MAX_EMPTY_POLLS=5
KAFKA_IDLE_THRESHOLD_SECONDS=30

# ==========================================
# LOGGING SETTINGS
# ==========================================

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log format string
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Date format for logs
LOG_DATE_FORMAT=%Y-%m-%d %H:%M:%S

# Enable file logging
LOG_TO_FILE=false

# Log file path
LOG_FILE_PATH=/app/logs/cdc_consumer.log

# Log rotation settings
LOG_MAX_FILE_SIZE=10485760
LOG_BACKUP_COUNT=5

# Enable structured JSON logging
LOG_STRUCTURED=false

# ==========================================
# MONITORING SETTINGS
# ==========================================

# Enable monitoring endpoints
MONITORING_ENABLED=true

# Metrics port (Prometheus)
METRICS_PORT=8000

# Health check port
HEALTH_CHECK_PORT=8001

# Enable Prometheus metrics
PROMETHEUS_ENABLED=true

# Prometheus metrics path
PROMETHEUS_PATH=/metrics

# Enable consumer metrics collection
COLLECT_CONSUMER_METRICS=true

# Enable database metrics collection
COLLECT_DATABASE_METRICS=true

# Enable system metrics collection
COLLECT_SYSTEM_METRICS=true

# ==========================================
# CONSUMER SETTINGS
# ==========================================

# Kafka topics to consume (comma-separated)
CDC_TOPICS=source_db.public.people,source_db.public.roles

# Batch processing size
CDC_BATCH_SIZE=100

# Batch timeout in seconds
CDC_BATCH_TIMEOUT=5.0

# Maximum retry attempts
CDC_MAX_RETRIES=3

# Retry delay in seconds
CDC_RETRY_DELAY=1.0

# Enable dead letter queue
CDC_ENABLE_DLQ=true

# Dead letter queue topic
CDC_DLQ_TOPIC=cdc_audit_dlq

# Maximum processing time per batch
CDC_MAX_PROCESSING_TIME=300

# ==========================================
# PGADMIN SETTINGS
# ==========================================

# pgAdmin web interface credentials
PGADMIN_EMAIL=admin@pgadmin.com
PGADMIN_PASSWORD=admin

# ==========================================
# DEVELOPMENT SETTINGS
# ==========================================

# Enable hot reload in development
HOT_RELOAD=false

# Enable SQL query logging
SQL_ECHO=false

# Enable detailed Kafka logging
KAFKA_DEBUG=false